"use strict";(self.webpackChunkmmsp_land_hl=self.webpackChunkmmsp_land_hl||[]).push([[3594],{80457:(e,t,i)=>{i.d(t,{Z:()=>h});class h{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.lengths=null!==e&&void 0!==e?e:[],this.coords=null!==t&&void 0!==t?t:[]}static fromJSON(e){return new h(e.lengths,e.coords)}static fromRect(e){const[t,i,s,n]=e,r=s-t,l=n-i;return new h([5],[t,i,r,0,0,l,-r,0,0,-l])}get isPoint(){return 0===this.lengths.length&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((e,t)=>e+t))}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let i=0;i<this.lengths.length;i++){const h=this.lengths[i];for(let i=0;i<h;i++)e(this.coords[2*(i+t)],this.coords[2*(i+t)+1]);t+=h}}deltaDecode(){const e=this.clone(),{coords:t,lengths:i}=e;let h=0;for(const s of i){for(let e=1;e<s;e++)t[2*(h+e)]+=t[2*(h+e)-2],t[2*(h+e)+1]+=t[2*(h+e)-1];h+=s}return e}clone(e){if(0===this.lengths.length)return new h([],[this.coords[0],this.coords[1]]);const t=2*(0===this.lengths.length?1:this.lengths.reduce(((e,t)=>e+t))),i=this.coords.slice(0,t);return e?(e.set(i),new h(this.lengths,e)):new h(Array.from(this.lengths),Array.from(i))}}},59001:(e,t,i)=>{i.d(t,{Z:()=>n});var h=i(82272),s=i(51e3);class n{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){var t;return null!==(t=this._resourceMap.get(e))&&void 0!==t?t:null}async fetchResource(e,t){const i=this._resourceMap.get(e);if(i)return{width:i.width,height:i.height};let h=this._inFlightResourceMap.get(e);return h?h.then((e=>({width:e.width,height:e.height}))):(h=(0,s.n$)(e,t),this._inFlightResourceMap.set(e,h),h.then((t=>(this._inFlightResourceMap.delete(e),this._resourceMap.set(e,t),{width:t.width,height:t.height})),(()=>({width:0,height:0}))))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}loadFont(e){return(0,h.mx)(e)}}},60975:(e,t,i)=>{i.d(t,{previewCIMSymbol:()=>p});var h=i(17842),s=i(78915),n=i(59001),r=i(28222),l=i(41015),a=i(31027);function o(e,t,i,h){const s=-t/2+1,n=t/2-1,r=i/2-1,l=-i/2+1;switch(e){case"esriGeometryPoint":return{x:0,y:0};case"esriGeometryPolyline":return{paths:[[[s,0],[0,0],[n,0]]]};default:return"legend"===h?{rings:[[[s,r],[n,0],[n,l],[s,l],[s,r]]]}:{rings:[[[s,r],[n,r],[n,l],[s,l],[s,r]]]}}}var c=i(37817),g=i(69157);const u=new class{constructor(e){this._spatialReference=e,this._imageDataCanvas=null,this._cimResourceManager=new n.Z}get _canvas(){return this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas")),this._imageDataCanvas}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(e,t,i,h,n,r,c,g,u){if(!e)return null;const{data:d}=e;if(!d||"CIMSymbolReference"!==d.type||!d.symbol)return null;const{symbol:m}=d;r||(r=(0,a.JW)(m));const y=await l.E.resolveSymbolOverrides(d,t,this._spatialReference,n,r,c,g),f=this._cimResourceManager,w=[];s.B$.fetchResources(y,f,w),s.B$.fetchFonts(y,f,w),w.length>0&&await Promise.all(w);const{width:p,height:M}=i,v=o(r,p,M,h),b=s.B$.getEnvelope(y,v,f);if(!b)return null;b.x===1/0&&(b.x=p+2),b.y===1/0&&(b.y=-M/2),b.width===-1/0&&(b.width=p),b.height===-1/0&&(b.height=M);let x=1,_=0,R=0;switch(m.type){case"CIMPointSymbol":case"CIMTextSymbol":{let e=1;b.width>p&&(e=p/b.width);let t=1;b.height>M&&(t=M/b.height),"preview"===h&&(b.width<p&&(e=p/b.width),b.height<M&&(t=M/b.height)),x=Math.min(e,t),_=b.x+b.width/2,R=b.y+b.height/2}break;case"CIMLineSymbol":{(u||b.height>M)&&(x=M/b.height),R=b.y+b.height/2;const e=b.x*x+p/2,t=(b.x+b.width)*x+p/2,{paths:i}=v;i[0][0][0]-=e/x,i[0][2][0]-=(t-p)/x}break;case"CIMPolygonSymbol":{_=b.x+b.width/2,R=b.y+b.height/2;const e=b.x*x+p/2,t=(b.x+b.width)*x+p/2,i=b.y*x+M/2,h=(b.y+b.height)*x+M/2,{rings:s}=v;e<0&&(s[0][0][0]-=e,s[0][3][0]-=e,s[0][4][0]-=e),i<0&&(s[0][0][1]+=i,s[0][1][1]+=i,s[0][4][1]+=i),t>p&&(s[0][1][0]-=t-p,s[0][2][0]-=t-p),h>M&&(s[0][2][1]+=h-M,s[0][3][1]+=h-M)}}const C={type:"cim",data:{type:"CIMSymbolReference",symbol:y}};return this.rasterize(C,p,M,_,R,x,r,1,v)}rasterize(e,t,i,h,s,n,l){let c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,g=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;const{data:u}=e;if(!u||"CIMSymbolReference"!==u.type||!u.symbol)return null;const{symbol:d}=u,m=this._canvas,y=1.3333333333333333*(window.devicePixelRatio||1);m.width=t*y,m.height=i*y,l||(l=(0,a.JW)(d)),g||(g=o(l,t,i,"legend")),m.width+=2*c,m.height+=2*c;const f=m.getContext("2d",{willReadFrequently:!0}),w=r.zA.createIdentity();return w.translate(-h,-s),w.scale(n*y,-n*y),w.translate(t*y/2+c,i*y/2+c),f.clearRect(0,0,m.width,m.height),new r.cD(f,this._cimResourceManager,w,!0).drawSymbol(d,g),f.getImageData(0,0,m.width,m.height)}}(null),d=(0,h.Wz)(c.b_.size),m=(0,h.Wz)(c.b_.maxSize),y=(0,h.Wz)(c.b_.lineWidth),f=1;async function w(e,t,i){const h=null===t||void 0===t?void 0:t.size;let n=null!=h&&"object"==typeof h&&"width"in h?h.width:h,r=null!=h&&"object"==typeof h&&"height"in h?h.height:h;if(null==n||null==r)if("esriGeometryPolygon"===i)n=d,r=d;else{const h=await async function(e,t,i){const{feature:h,fieldMap:n,viewParams:r}=t.cimOptions||t,a=await l.E.resolveSymbolOverrides(e.data,h,null,n,i,null,r);if(!a)return null;(e=e.clone()).data={type:"CIMSymbolReference",symbol:a},e.data.primitiveOverrides=void 0;const o=[];return s.B$.fetchResources(a,u.resourceManager,o),s.B$.fetchFonts(a,u.resourceManager,o),o.length>0&&await Promise.all(o),s.B$.getEnvelope(a,null,u.resourceManager)}(e,t,i);h&&(n=h.width,r=h.height),"esriGeometryPolyline"===i&&(n=y),n=null!=n&&isFinite(n)?Math.min(n,m):d,r=null!=r&&isFinite(r)?Math.max(Math.min(r,m),f):d}return"legend"===t.style&&"esriGeometryPolyline"===i&&(n=y),{width:n,height:r}}async function p(e){var t,i,s;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{node:r,opacity:l,symbolConfig:o}=n,c=null!=o&&"object"==typeof o&&"isSquareFill"in o&&o.isSquareFill,d=n.cimOptions||n,m=d.geometryType||(0,a.JW)(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.symbol),y=await w(e,n,m),{feature:f,fieldMap:p}=d,M=c||"esriGeometryPolygon"!==m?"preview":"legend",v=await u.rasterizeCIMSymbolAsync(e,f,y,M,p,m,null,d.viewParams,d.allowScalingUp);if(!v)return null;const{width:b,height:x}=v,_=document.createElement("canvas");_.width=b,_.height=x,_.getContext("2d").putImageData(v,0,0);const R=(0,h.F2)(y.width),C=(0,h.F2)(y.height),F=new Image(R,C);F.src=_.toDataURL(),F.ariaLabel=null!==(i=n.ariaLabel)&&void 0!==i?i:null,F.alt=null!==(s=n.ariaLabel)&&void 0!==s?s:"",null!=l&&(F.style.opacity="".concat(l));let S=F;if(null!=n.effectView){const e={shape:{type:"image",x:0,y:0,width:R,height:C,src:F.src},fill:null,stroke:null,offset:[0,0]};S=(0,g.wh)([[e]],[R,C],{effectView:n.effectView,ariaLabel:n.ariaLabel})}return r&&S&&r.appendChild(S),S}},28289:(e,t,i)=>{i.d(t,{Z:()=>s});var h=i(30932);class s{constructor(e,t,i,s){this.transformedX=0,this.transformedY=0,this.center=(0,h.al)(e,t),this.centerT=(0,h.Ue)(),this.halfWidth=i/2,this.halfHeight=s/2,this.width=i,this.height=s}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(e){this.center[0]=e}set y(e){this.center[1]=e}clone(){return new s(this.x,this.y,this.width,this.height)}serialize(e){return e.writeF32(this.center[0]),e.writeF32(this.center[1]),e.push(this.width),e.push(this.height),e}findCollisionDelta(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;const i=Math.abs(e.centerT[0]-this.centerT[0]),h=Math.abs(e.centerT[1]-this.centerT[1]),s=(e.halfWidth+this.halfWidth+t)/i,n=(e.halfHeight+this.halfHeight+t)/h,r=Math.min(s,n);return Math.log2(r)}extend(e){const t=Math.min(this.xmin,e.xmin),i=Math.min(this.ymin,e.ymin),h=Math.max(this.xmax,e.xmax)-t,s=Math.max(this.ymax,e.ymax)-i,n=t+h/2,r=i+s/2;this.width=h,this.height=s,this.halfWidth=h/2,this.halfHeight=s/2,this.x=n,this.y=r}static deserialize(e){const t=e.readF32(),i=e.readF32(),h=e.readInt32(),n=e.readInt32();return new s(t,i,h,n)}}}}]);
//# sourceMappingURL=3594.84d08f98.chunk.js.map